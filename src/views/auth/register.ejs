<%- include('../partials/header') %>

<h2>Créer un compte anonyme</h2>

<% if (typeof error !== 'undefined' && error) { %>
<div class="alert alert-error">
    <%= error %>
</div>
<% } %>

<div style="max-width: 500px;">
    <div class="alert alert-info">
        <strong>⚠️ Important :</strong>
        <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
            <li>Aucun email n'est demandé</li>
            <li>Choisissez un pseudo unique et un code PIN à 4 chiffres</li>
            <li><strong>Si vous oubliez votre PIN, votre compte sera perdu définitivement</strong></li>
            <li>Notez votre PIN dans un endroit sûr</li>
        </ul>
    </div>

    <form method="POST" action="/auth/register">
        <div class="form-group">
            <label for="pseudo">Pseudo (3-20 caractères) *</label>
            <input
                type="text"
                id="pseudo"
                name="pseudo"
                required
                minlength="3"
                maxlength="20"
                pattern="[a-zA-Z0-9_-]+"
                value="<%= typeof pseudo !== 'undefined' ? pseudo : '' %>"
                autocomplete="off"
            >
            <p class="text-small">Lettres, chiffres, tirets et underscores seulement</p>
        </div>

        <div class="form-group">
            <label for="pin">Code PIN (4 chiffres) *</label>
            <input
                type="password"
                id="pin"
                name="pin"
                required
                pattern="[0-9]{4}"
                maxlength="4"
                inputmode="numeric"
                autocomplete="off"
            >
            <p class="text-small">4 chiffres (ex: 1234). ⚠️ Notez-le bien, impossible à récupérer !</p>
        </div>

        <div class="form-group">
            <label for="language">Langue préférée</label>
            <select id="language" name="language">
                <option value="fr" <%= typeof language !== 'undefined' && language === 'fr' ? 'selected' : '' %>>Français</option>
                <option value="nl" <%= typeof language !== 'undefined' && language === 'nl' ? 'selected' : '' %>>Nederlands</option>
                <option value="de" <%= typeof language !== 'undefined' && language === 'de' ? 'selected' : '' %>>Deutsch</option>
                <option value="en" <%= typeof language !== 'undefined' && language === 'en' ? 'selected' : '' %>>English</option>
            </select>
        </div>

        <button type="submit" class="btn">Créer mon compte</button>
        <a href="/auth/login" class="btn btn-secondary" style="margin-left: 1rem;">J'ai déjà un compte</a>
    </form>
</div>

<%- include('../partials/footer') %>
