<%- include('../partials/header') %>

<h2><%= t('auth.register') %></h2>

<% if (typeof error !== 'undefined' && error) { %>
<div class="alert alert-error">
    <%= error %>
</div>
<% } %>

<div style="max-width: 500px;">
    <div class="alert alert-info">
        <strong><%= t('auth.welcomeNew') %></strong>
        <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
            <li><%= t('auth.noEmail') %></li>
            <li><%= t('auth.choosePseudo') %></li>
            <li><strong><%= t('auth.rememberPIN') %></strong></li>
            <li><%= t('auth.neverShared') %></li>
        </ul>
    </div>

    <form method="POST" action="/auth/register">
        <div class="form-group">
            <label for="pseudo"><%= t('auth.pseudoPlaceholder') %></label>
            <input
                type="text"
                id="pseudo"
                name="pseudo"
                required
                minlength="3"
                maxlength="20"
                pattern="[a-zA-Z0-9_-]+"
                value="<%= typeof pseudo !== 'undefined' ? pseudo : '' %>"
                autocomplete="off"
            >
            <p class="text-small"><%= t('validation.pseudoFormat') %></p>
        </div>

        <div class="form-group">
            <label for="pin"><%= t('auth.setPIN') %></label>
            <input
                type="password"
                id="pin"
                name="pin"
                required
                pattern="[0-9]{4}"
                maxlength="4"
                inputmode="numeric"
                autocomplete="off"
            >
            <p class="text-small"><%= t('auth.rememberPIN') %></p>
        </div>

        <div class="form-group">
            <label for="language"><%= t('settings.language') %></label>
            <select id="language" name="language">
                <option value="fr" <%= typeof language !== 'undefined' && language === 'fr' ? 'selected' : '' %>><%= t('languages.fr') %></option>
                <option value="nl" <%= typeof language !== 'undefined' && language === 'nl' ? 'selected' : '' %>><%= t('languages.nl') %></option>
                <option value="de" <%= typeof language !== 'undefined' && language === 'de' ? 'selected' : '' %>><%= t('languages.de') %></option>
                <option value="en" <%= typeof language !== 'undefined' && language === 'en' ? 'selected' : '' %>><%= t('languages.en') %></option>
            </select>
        </div>

        <button type="submit" class="btn"><%= t('auth.register') %></button>
        <a href="/auth/login" class="btn btn-secondary" style="margin-left: 1rem;"><%= t('nav.login') %></a>
    </form>
</div>

<%- include('../partials/footer') %>
